<!DOCTYPE html>
<html lang="en">
  <meta property="fb:app_id" content="<%= FACEBOOK_APP_ID %>" />

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= content_for?(:title) ? yield(:title) : "With" %></title>
    <%= csrf_meta_tags %>

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <%= stylesheet_link_tag    "application", :media => "all" %>

    <!-- For third-generation iPad with high-resolution Retina display: -->
    <!-- Size should be 144 x 144 pixels -->
    <%= favicon_link_tag 'images/apple-touch-icon-144x144-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '144x144' %>

    <!-- For iPhone with high-resolution Retina display: -->
    <!-- Size should be 114 x 114 pixels -->
    <%= favicon_link_tag 'images/apple-touch-icon-114x114-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '114x114' %>

    <!-- For first- and second-generation iPad: -->
    <!-- Size should be 72 x 72 pixels -->
    <%= favicon_link_tag 'images/apple-touch-icon-72x72-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '72x72' %>

    <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
    <!-- Size should be 57 x 57 pixels -->
    <%= favicon_link_tag 'images/apple-touch-icon-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png' %>

    <!-- For all other devices -->
    <!-- Size should be 32 x 32 pixels -->
    <%= favicon_link_tag '/assets/favicon.ico', :rel => 'shortcut icon' %>

    <style type="text/css">  
    .scrollspy-example {  

    overflow: auto;  
     
    }  
    </style> 

     <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <%= javascript_include_tag "application" %>

    <!-- NOTE MAY HIDE ERRORS IN -->
    <%= yield :head %>
  </head>
  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">
            With
          </a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <% if user_signed_in? %>
                <li><%= link_to "#{current_user.name}", "/snippets/?user=#{current_user.email}"  %></li>
              <% end %>
              <li><%= link_to "Public Timeline", "/snippets"  %></li>
              <li><%= link_to "Friends", "/snippets/friends"  %></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Groups<b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li class=""><a href="#mysql">Study Group</a></li>
                  <li class=""><a href="#pgsql">Project Group</a></li>
                 <li class=""><a href="#mgdb">Play Group</a></li>
                </ul>
              </li>
              <li>
                <%= link_to('Get Our Client', :controller => :marklet) %>
              </li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>
    <%= bootstrap_flash %>

    <% if @params[:show_params] %>
      <pre>
        <%=h @params.to_yaml %>
      </pre>
    <% end %>

    <div class="container-fluid">
      <div class="row-fluid">
        <% if @bare %>
          <div id="hideme" class="hidden">
        <% else %>
          <div class="span3"  data-spy="affix" >
        <% end %>
          <div>
          <%= render_breadcrumbs %>   
          </div>




          <div class="well sidebar-nav">
            <ul class="nav nav-list">
              <li class="nav-header">Sidebar</li>
              <li>
               
              
                <% if user_signed_in? %>
                <!-- https://graph.facebook.com/1116472965?fields=id,name,picture.type(large).url -->
                     <%= link_to image_tag("http://profile.ak.fbcdn.net/hprofile-ak-ash3/49308_1116472965_8480_n.jpg", :border => 0), "/snippets/?user=#{current_user.email}"  %>
                    <div>Welcome <%=h current_user.name %></div>
                    <%= link_to('Logout', destroy_user_session_path, :method=>'delete') %>        
                   
                    <%= link_to('Manage Account', edit_user_registration_path) %>
                  <% else %>
                    <%= link_to "Sign in with Facebook", user_omniauth_authorize_path(:facebook) %>
                    <%= link_to('Sign in', new_user_session_path)  %>
                    <%= link_to('Sign up', new_user_registration_path)  %>
                <% end %>
              </li>
              <li><%= link_to "Dive In", "/snippets/"  %></li>
              <li><%= link_to "Wander", "/snippets/"  %></li>
              <li><%= link_to "Tours", "/snippets/"  %></li>
              <li><%= link_to "Cruise Control", "/snippets/"  %></li>
            </ul>
          </div><!--/.well -->
          <div class="well sidebar-nav">
            <ul class="nav nav-list">
              <li class="nav-header">Feature Box</li>
              <li><%= link_to "Wander", "/snippets/"  %></li>
              <li><%= link_to "Tours", "/snippets/"  %></li>
              <li><%= link_to "Cruise Control", "/snippets/"  %></li>
            </ul>
          </div><!--/.well -->
          <div class="well sidebar-nav">
            <ul class="nav nav-list">
              <li class="nav-header">Ads</li>
              <li><p>
                Less uses a slightly different syntax than Sass: “@linkColor” instead of “$linkColor”. Also we don’t see the “!default” directive we had earlier. Most importantly, changing the value of a variable in Less works differently than it does in Sass; there’s no concept of a default value and overriding it. In fact, in Less variables are actually implemented as constants. See lesscss.org for more details. This means once you define a value for a variable it cannot be changed.

At first glance, this might mean that the only way to change the Twitter Bootstrap settings would be to edit the Twitter Less code directly, right inside of Less-Rails-Bootstrap. But this would be very ugly: every time I updated Less-Rails-Bootstrap I would lose my changes. While it might be possible to track my changes in a branch using git somehow, re-merging every time I got a newer version, this would be an obvious maintenance problem and an ongoing headache.

Actually, it turns out there’s a simpler way to do it. Because of a bug in the Less compiler, you can override the “constant” value of a variable by changing it after it is initially declared. That is, the value of the variable constant will be whatever its last assigned value is. It seems that the Less compiler first evaluates the values of all constants, and then evaluates the rest of the Less script, substituting the value for each variable.


              </p></li>
            </ul>
          </div><!--/.well -->
        </div><!--/span-->
        <%if @bare %>
          <div data-offset="50" class="span10 scrollspy-example offset1">
        <% else %>
          <div data-offset="50" class="span9 scrollspy-example offset3">
        <% end %>

          <!-- FB Integration -->
         

            <div id="fb-root"></div>
            <script src="http://connect.facebook.net/en_US/all.js"></script>
            <script>
              window.fbAsyncInit = function() {
                FB.init({ appId: '<%= "#{@fb_app_id}"  %>', 
                  status: true, 
                  cookie: true,
                  xfbml: true,
                  oauth: true});

                  FB.Event.subscribe('auth.authResponseChange', handleResponseChange);  
                };
            </script>
             <script>
             function handleResponseChange(response) {
               document.body.className = response.authResponse ? 'connected' : 'not_connected';

               if (response.authResponse) {
                 console.log(response);
               }
               //updateUserInfo(response);
             }
             </script>

             <div class="avatar" style="float: left">
                <fb:profile-pic uid="<%= current_user.try(:uid) %>" size="small" facebook-logo="true"></fb:profile-pic>
             </div>
             <div class="avatar" style="float: left">
              &nbsp;
            </div>
             <div class="avatar" style="float: left">
            <iframe src="http://files.bannersnack.com/iframe/embed.html?hash=bdtpfxut&wmode=transparent&t=1363487396" width="728" height="90" seamless="seamless" scrolling="no" frameborder="0" allowtransparency="true"></iframe>
            </div>
            <div style="clear: both"></div>
            
             <script>
              function publishStoryToFacebook(url, description) {
                //debugger;
                FB.ui({
                  method: 'feed',
                  name: 'Snippets API testing FB GRAPH API',
                  caption: "I just collected a new bit of joy",
                  description: "" + description,
                  link: document.location.href,
                  picture: 'http://ec2-50-16-17-73.compute-1.amazonaws.com:3000/' + url
                }, 
                function(response) {
                  console.log('publishStory response: ', response);
                });
                return false;
              }
              </script>

              <!-- ORIGINAL FB CODE -->

              <!-- <div>

              <span id="login" style="float:left">
                 <p><button onClick="loginUser();">Login</button></p>
               </span>
               <span id="logout" style="float:left">
                 <p><button  onClick="logoutUser();">Logout</button></p>
               </span>
               <div style="clear:both"></div>
               <script>
                 function loginUser() {    
                   FB.login(function(response) { }, {scope:'email'});     
                 }
                 function logoutUser() {
                   var logoutUrl = "/users/logout";
                   FB.logout();
                 }
               </script>


               <div id="user-info"></div>
               <script>
                 function updateUserInfo(response) {
                   FB.api('/me', function(response) {
                     document.getElementById('user-info').innerHTML = '<img src="https://graph.facebook.com/' + response.id + '/picture">' + response.name;
                   });
                 }
               </script>

               <a href="#" onclick="getUserFriends();">Get friends</a><br>
               <div id="user-friends"></div>
               <script>
                function getUserFriends() {
                 FB.api("/me/friends?fields=name,picture", function(response) {
                   console.log('Got friends: ', response);

                   if (!response.error) {
                     var markup = '';

                     var friends = response.data;

                     for (var i=0; i < friends.length && i < 25; i++) {
                       var friend = friends[i];

                       markup += '<div style="border: 1px solid black; float:left; margin-left: 10px; margin-top: 10px;">';
                       markup += '<img src="' + friend.picture.data.url + '" />';
                       markup += '<div>' + friend.name + '</div>';
                       markup += '</div>';

                     }


                     markup += '<div style="clear:both"></div>';

                     document.getElementById('user-friends').innerHTML = markup;
                   }
                 });
               }
               </script>

              <script>
              function publishStory(url, description) {
                //debugger;
                FB.ui({
                  method: 'feed',
                  name: 'Snippets API testing FB GRAPH API',
                  caption: "I just collected a new bit of joy",
                  description: "" + description,
                  link: document.location.href,
                  picture: 'http://ec2-50-16-17-73.compute-1.amazonaws.com:3000/' + url
                }, 
                function(response) {
                  console.log('publishStory response: ', response);
                });
                return false;
              }
              </script>
            </div>
          
 -->

            <!-- FB JS END-->
        
           
          

          
          <%= yield %>
        </div>
      </div><!--/row-->


      <footer>
        <div class="navbar navbar-fixed-bottom">
        <div class="navbar-inner">
        <div class="container-fluid">
          <p>&copy; Company 2013</p>
          
        </div>
        </div>
        </div>
      </footer>

      <footer>
        
      </footer>

    </div> <!-- /container -->

   

  </body>
</html>
